@prefix doapk: <https://w3id.org/doap-kg#> .
@prefix sh:    <http://www.w3.org/ns/shacl#> .
@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix prov:  <http://www.w3.org/ns/prov#> .

doapk:TransactionShape a sh:NodeShape ;
  sh:targetClass doapk:PaymentTransaction ;
  sh:property [
    sh:path doapk:amount ; sh:datatype xsd:decimal ; sh:minCount 1 ;
    sh:message "PaymentTransaction must have doapk:amount (decimal)." ;
  ] ;
  sh:property [
    sh:path doapk:currency ; sh:datatype xsd:string ; sh:minCount 1 ;
    sh:message "PaymentTransaction must have doapk:currency (string)." ;
  ] ;
  sh:property [
    sh:path doapk:hasRail ; sh:class doapk:PaymentRail ; sh:minCount 1 ;
    sh:message "PaymentTransaction must declare a PaymentRail." ;
  ] ;
  sh:property [
    sh:path doapk:hasJurisdiction ; sh:class doapk:Jurisdiction ; sh:minCount 1 ;
    sh:message "PaymentTransaction must declare a Jurisdiction." ;
  ] .

doapk:OverrideShape a sh:NodeShape ;
  sh:targetClass doapk:Override ;
  sh:property [
    sh:path doapk:justification ; sh:datatype xsd:string ; sh:minCount 1 ;
    sh:message "Override must include a human-readable justification." ;
  ] ;
  sh:property [
    sh:path prov:wasAssociatedWith ; sh:minCount 1 ;
    sh:message "Override must be associated with an agent (prov:wasAssociatedWith)." ;
  ] ;
  sh:property [
    sh:path doapk:timestamp ; sh:datatype xsd:dateTime ; sh:minCount 1 ;
    sh:message "Override must be timestamped (doapk:timestamp)." ;
  ] .

doapk:AttestationShape a sh:NodeShape ;
  sh:targetClass doapk:Attestation ;
  sh:property [
    sh:path doapk:validUntil ; sh:datatype xsd:dateTime ; sh:minCount 1 ;
    sh:message "Attestation must include validUntil." ;
  ] .
